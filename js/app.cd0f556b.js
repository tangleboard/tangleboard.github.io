(function(e){function t(t){for(var r,a,o=t[0],u=t[1],c=t[2],f=0,l=[];f<o.length;f++)a=o[f],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&l.push(i[a][0]),i[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);d&&d(t);while(l.length)l.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,a=1;a<n.length;a++){var o=n[a];0!==i[o]&&(r=!1)}r&&(s.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={app:0},i={app:0},s=[];function o(e){return u.p+"js/"+({about:"about"}[e]||e)+"."+{about:"597e4679"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={about:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({about:"about"}[e]||e)+"."+{about:"7a9a69c6"}[e]+".css",i=u.p+r,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var c=s[o],f=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(f===r||f===i))return t()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){c=l[o],f=c.getAttribute("data-href");if(f===r||f===i)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||i,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete a[e],d.parentNode.removeChild(d),n(s)},d.href=i;var h=document.getElementsByTagName("head")[0];h.appendChild(d)})).then((function(){a[e]=0})));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise((function(t,n){r=i[e]=[t,n]}));t.push(r[2]=s);var c,f=document.createElement("script");f.charset="utf-8",f.timeout=120,u.nc&&f.setAttribute("nonce",u.nc),f.src=o(e);var l=new Error;c=function(t){f.onerror=f.onload=null,clearTimeout(d);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,n[1](l)}i[e]=void 0}};var d=setTimeout((function(){c({type:"timeout",target:f})}),12e4);f.onerror=f.onload=c,document.head.appendChild(f)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],f=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=f;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0073":function(e,t,n){},"034f":function(e,t,n){"use strict";n("85ec")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},1847:function(e,t,n){},"1d13":function(e,t,n){"use strict";n("0073")},2:function(e,t){},"2e0d":function(e,t,n){"use strict";var r=n("1da1"),a=(n("96cf"),n("a434"),n("a15b"),n("fb6a"),n("b0c0"),n("c740"),n("38cf"),n("56d7")),i=n("37a0"),s=n("0ed6"),o=n("6821"),u=function(e,t,n){if(0==e.length)return e.push(t),t;var r=e.length-1;while(r>=0){if(n){if(e[r]["timestamp"]>t["timestamp"])return e.splice(r+1,0,t),e}else if(e[r]["timestamp"]<t["timestamp"])return e.splice(r+1,0,t),e;r--}return e.splice(0,0,t),e},c=function(e){for(var t=new Array(e[0].lastIndex),n=0;n<=e[0].lastIndex;n++)t[e[n].currentIndex]=e[n].signatureMessageFragment;return s.utf8StringFromTrytes(t.join())},f=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!("Signature"in t)){e.next=8;break}return e.next=3,i["a"].importPublicKey(t["PublicKey"]);case 3:return n=e.sent,e.next=6,i["a"].VerifySig(n,t["Signature"],t["message"]);case 6:r=e.sent,r&&(t["id"]="ID: "+o(t["PublicKey"]).slice(0,10));case 8:return e.abrupt("return");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t["a"]={addMessage:function(e,t){var n=JSON.parse(c(e));n["timestamp"]=e[0].timestamp,n["hash"]=e[0].hash,n["id"]="",f(n),t.push(n)},fetchMessages:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.$IOTA.findTransactionObjects({addresses:[e]}).then((function(e){for(var a=0;a<e.length;a++){var i=e[a];n.$IOTA.getBundle(i.hash).then((function(e){var n=c(e),a=JSON.parse(n);return a["message"]||a["name"]?(t.findIndex((function(t){return t["hash"]==e[0].hash}))<0&&(a["timestamp"]=e[0].timestamp,a["hash"]=e[0].hash,a["id"]="",u(t,a,r)),f(a),null):null})).catch((function(){return null}))}return null})).catch((function(){return null}))},postMessage:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r,s,o,u,c,f,l,d,h=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a["globalSettings"].UseID){e.next=9;break}return e.next=3,i["a"].signData(t["message"]);case 3:return r=e.sent,e.next=6,i["a"].exportPublicKey();case 6:s=e.sent,t["Signature"]=r,t["PublicKey"]=s;case 9:return o=JSON.stringify(t),u=this.$UTFConverter.trytesFromUTF8String(o),c="PUEOTSEITFEVEWCWBTSIZM9NKRGJEIMXTULBACGFRQK9IMGICLBKW9TTEVSDQMGWKBXPVCBMMCXWMNPDX",f=3,l=9,d=[{value:0,address:n,message:u}],e.next=17,this.$IOTA.prepareTransfers(c,d).then((function(e){return h.$IOTA.sendTrytes(e,f,l)})).catch((function(e){return console.error(e),null}));case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),postThread:function(e,t){var n=this,r=JSON.stringify(e),a=this.$UTFConverter.trytesFromUTF8String(r),i="PUEOTSEITFEVEWCWBTSIZM9NKRGJEIMXTULBACGFRQK9IMGICLBKW9TTEVSDQMGWKBXPVCBMMCXWMNPDX",s=3,o=9,u=[{value:0,address:t,message:a}];return this.$IOTA.prepareTransfers(i,u).then((function(e){return n.$IOTA.sendTrytes(e,s,o)}))},generateAddressFromName:function(e,t){return a["globalSettings"].boardName+"A".repeat(17-a["globalSettings"].boardName.length)+this.$Converter.asciiToTrytes(this.$MD5(e+t))}}},3:function(e,t){},3664:function(e,t,n){"use strict";n("bb74")},"37a0":function(e,t,n){"use strict";var r=n("1da1"),a=(n("96cf"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("d3b7"),n("1276"),n("ac1f"),n("498a"),n("56d7")),i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"},modulusLength:2048,extractable:!0,publicExponent:new Uint8Array([1,0,1])},s=["sign","verify"];function o(e){for(var t=new Uint8Array(e),n="",r=0;r<t.byteLength;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function u(e){for(var t=atob(e),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer}function c(e){for(var t=unescape(encodeURIComponent(e)),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}function f(e,t){var n=o(e),r="-----BEGIN "+t+"-----\r\n",a=0;while(a<n.length)a+64<=n.length?r+=n.substr(a,64)+"\r\n":r+=n.substr(a)+"\r\n",a+=64;return r+="-----END "+t+"-----\r\n",r}function l(e){for(var t=e.split("\n"),n="",r=0;r<t.length;r++)t[r].trim().length>0&&t[r].indexOf("-BEGIN RSA PRIVATE KEY-")<0&&t[r].indexOf("-BEGIN RSA PUBLIC KEY-")<0&&t[r].indexOf("-END RSA PRIVATE KEY-")<0&&t[r].indexOf("-END RSA PUBLIC KEY-")<0&&(n+=t[r].trim());return u(n)}t["a"]={generateKey:function(){return new Promise((function(e){var t=crypto.subtle.generateKey(i,!0,s);t.then((function(t){e(t)}))}))},signData:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=o,e.next=3,window.crypto.subtle.sign(i,a["globalSettings"].PrivateKey,c(t));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),exportPublicKey:function(){return new Promise((function(e){window.crypto.subtle.exportKey("spki",a["globalSettings"].PublicKey).then((function(t){e(f(t,"RSA PUBLIC KEY"))}))}))},importPublicKey:function(e){return new Promise((function(t){var n=crypto.subtle.importKey("spki",l(e),i,!0,["verify"]);n.then((function(e){t(e)}))}))},VerifySig:function(e,t,n){return crypto.subtle.verify(i,e,u(t),c(n))}}},4:function(e,t){},"4bfb":function(e,t,n){"use strict";n("1847")},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t),n.d(t,"globalSettings",(function(){return V}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"refreshTimeSetter"},[n("p",[e._v("Refresh interval")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.refreshTime,expression:"refreshTime"}],attrs:{name:"refreshtime",id:"refreshtime"},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.refreshTime=t.target.multiple?n:n[0]},function(t){return e.onChangeRefreshTime(t)}]}},[n("option",{attrs:{value:"0"}},[e._v("Off")]),n("option",{attrs:{value:"30"}},[e._v("30s")]),n("option",{attrs:{value:"10"}},[e._v("10s")]),n("option",{attrs:{value:"4"}},[e._v("4s")]),n("option",{attrs:{value:"2"}},[e._v("2s")])])]),n("div",{staticClass:"setID"},[n("input",{attrs:{checked:"",type:"checkbox",id:"setID",name:"setID"},on:{change:function(t){return e.checking(t)}}}),n("p",[e._v("Use ID")])]),e._m(0),n("router-view")],1)},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"nav"}},[r("img",{staticClass:"globe",attrs:{src:n("9dee")}}),r("h1",{staticClass:"title"},[e._v("TangleBoard")])])}],s=n("1da1"),o=(n("96cf"),n("37a0")),u={name:"App",data:function(){return{refreshTime:V.refreshTime}},methods:{onChangeRefreshTime:function(e){V.refreshTime=e.target.value,this.refreshTime=e.target.value},checking:function(e){V.UseID=e.target.checked},setId:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].generateKey();case 2:t=e.sent,V.PrivateKey=t.privateKey,V.PublicKey=t.publicKey;case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){V.UseID=!0,this.setId()}},c=u,f=(n("034f"),n("2877")),l=Object(f["a"])(c,a,i,!1,null,null,null),d=l.exports,h=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f")),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"start"},[n("h1",{staticClass:"oswald"},[e._v("Choose board")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.boardNameInput,expression:"boardNameInput"}],attrs:{type:"text",onkeypress:"return (event.charCode > 64 && event.charCode < 91) || (event.charCode > 96 && event.charCode < 123)"},domProps:{value:e.boardNameInput},on:{input:function(t){t.target.composing||(e.boardNameInput=t.target.value)}}}),n("button",{attrs:{disabled:e.boardNameInput.length>17},on:{click:function(t){return e.enterBoard()}}},[e._v("Enter")])])},m=[],v={name:"Start",data:function(){return{boardNameInput:"main"}},methods:{enterBoard:function(){this.$router.push({name:"Home",params:{boardName:this.boardNameInput}})}},components:{}},g=v,b=(n("aa21"),Object(f["a"])(g,p,m,!1,null,null,null)),A=b.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("router-view"),"threadviewer"!=e.$router.currentRoute.name?n("span",[n("ThreadList",{attrs:{msg:"Threads"}}),n("CreateThread",{attrs:{msg:"Create a new thread"}})],1):e._e()],1)},T=[],I=(n("38cf"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"threadlist"},[n("h1",{staticClass:"oswald"},[e._v(e._s(e.msg))]),n("table",{staticClass:"threads"},e._l(e.threads,(function(t){return n("tr",{key:t.hash},[n("th",[n("router-link",{attrs:{to:{name:"threadviewer",params:{name:t["name"],timestamp:t["timestamp"]}}}},[e._v(e._s(t["name"]))])],1),n("th",[e._v(e._s(new Date(1e3*t["timestamp"]).toLocaleString()))])])})),0)])}),w=[],C=n("2e0d"),S={created:function(){this.fetchMessages=C["a"].fetchMessages},name:"ThreadList",data:function(){return{threads:[],intervalid1:null}},methods:{fetchThreads:function(){this.fetchMessages(V.boardAddress,this.threads,!0)},startAutoFetchingThreads:function(){this.fetchThreads(),V.refreshTime>0&&(this.intervalid1=setInterval(function(){this.fetchThreads()}.bind(this),1e3*V.refreshTime))},stopAutoFetchingThreads:function(){clearInterval(this.intervalid1)}},props:{msg:String},mounted:function(){this.startAutoFetchingThreads()},beforeDestroy:function(){this.stopAutoFetchingThreads()}},N=S,_=(n("3664"),Object(f["a"])(N,I,w,!1,null,"4a23b808",null)),x=_.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"createthread"},[n("h1",{staticClass:"oswald"},[e._v(e._s(e.msg))]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.threadNameInput,expression:"threadNameInput"}],attrs:{type:"text"},domProps:{value:e.threadNameInput},on:{input:function(t){t.target.composing||(e.threadNameInput=t.target.value)}}}),n("button",{on:{click:function(t){return e.createThread()}}},[e._v("Create")])])},P=[],O={created:function(){this.postThread=C["a"].postThread},name:"CreateThread",data:function(){return{threadNameInput:""}},props:{msg:String},methods:{previewFiles:function(e){console.log(e.target.files),e.target.files.length>0&&(this.img=e.target.files[0])},createThread:function(){var e=this,t=this.threadNameInput,n=null;this.postThread({name:t},V.boardAddress).then((function(r){n=r[0].timestamp,e.$router.push({name:"threadviewer",params:{name:t,timestamp:n}})})).catch((function(e){console.error(e)})),this.threadNameInput=""}}},K=O,D=(n("4bfb"),n("1d13"),Object(f["a"])(K,E,P,!1,null,"0f8b35bf",null)),M=D.exports,R={name:"Home",data:function(){return{refreshTime:V.refreshTime}},methods:{},components:{ThreadList:x,CreateThread:M},props:{boardName:String},beforeMount:function(){V.boardName=this.$route.params.boardName.toUpperCase(),V.boardAddress=V.boardName+"A".repeat(81-V.boardName.length)}},k=R,$=Object(f["a"])(k,y,T,!1,null,null,null),U=$.exports;r["a"].use(h["a"]);var B=[{path:"/",name:"Start",component:A},{path:"/home/:boardName",name:"Home",component:U,children:[{path:"threadviewer/:name/:timestamp",name:"threadviewer",component:function(){return n.e("about").then(n.bind(null,"dc6f"))}}]}],j=new h["a"]({routes:B}),F=j,L=n("bc3a"),G=n.n(L);r["a"].config.productionTip=!1,r["a"].prototype.$IOTA=n("b7ec").composeAPI({provider:"https://nodes.devnet.iota.org:443"}),r["a"].prototype.$UTFConverter=n("0ed6"),r["a"].prototype.$Converter=n("17c8"),r["a"].prototype.$MD5=n("6821"),r["a"].prototype.$http=G.a;var V=new r["a"]({data:{refreshTime:4,UseID:!1,PrivateKey:"",PublicKey:"",boardAddress:"DATTTTRALIZEDCHANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",boardName:"DATTTTRALIZEDCHAN"}});new r["a"]({router:F,render:function(e){return e(d)}}).$mount("#app")},6:function(e,t){},7:function(e,t){},"7f8c":function(e,t,n){},8:function(e,t){},"85ec":function(e,t,n){},9:function(e,t){},"9dee":function(e,t,n){e.exports=n.p+"img/globe2.9111d003.gif"},aa21:function(e,t,n){"use strict";n("7f8c")},bb74:function(e,t,n){}});
//# sourceMappingURL=app.cd0f556b.js.map