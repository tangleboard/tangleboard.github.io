(function(e){function t(t){for(var n,a,i=t[0],u=t[1],c=t[2],l=0,d=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);h&&h(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,a=1;a<r.length;a++){var i=r[a];0!==o[i]&&(n=!1)}n&&(s.splice(t--,1),e=u(u.s=r[0]))}return e}var n={},a={app:0},o={app:0},s=[];function i(e){return u.p+"js/"+({about:"about"}[e]||e)+"."+{about:"b0a0e83f"}[e]+".js"}function u(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.e=function(e){var t=[],r={about:1};a[e]?t.push(a[e]):0!==a[e]&&r[e]&&t.push(a[e]=new Promise((function(t,r){for(var n="css/"+({about:"about"}[e]||e)+"."+{about:"68060fc9"}[e]+".css",o=u.p+n,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var c=s[i],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===n||l===o))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){c=d[i],l=c.getAttribute("data-href");if(l===n||l===o)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var n=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete a[e],h.parentNode.removeChild(h),r(s)},h.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){a[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=s);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=i(e);var d=new Error;c=function(t){l.onerror=l.onload=null,clearTimeout(h);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",d.name="ChunkLoadError",d.type=n,d.request=a,r[1](d)}o[e]=void 0}};var h=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=n,u.d=function(e,t,r){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(r,n,function(t){return e[t]}.bind(null,n));return r},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var h=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0073":function(e,t,r){},"034f":function(e,t,r){"use strict";r("85ec")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},1847:function(e,t,r){},"1d13":function(e,t,r){"use strict";r("0073")},2:function(e,t){},"2e0d":function(e,t,r){"use strict";r("a434"),r("a15b"),r("b0c0"),r("c740"),r("38cf");var n=r("56d7"),a=r("0ed6"),o=function(e,t,r){if(0==e.length)return e.push(t),t;var n=e.length-1;while(n>=0){if(r){if(e[n]["timestamp"]>t["timestamp"])return e.splice(n+1,0,t),e}else if(e[n]["timestamp"]<t["timestamp"])return e.splice(n+1,0,t),e;n--}return e.splice(0,0,t),e},s=function(e){for(var t=new Array(e[0].lastIndex),r=0;r<=e[0].lastIndex;r++)t[e[r].currentIndex]=e[r].signatureMessageFragment;return a.utf8StringFromTrytes(t.join())};t["a"]={addMessage:function(e,t){var r=JSON.parse(s(e));r["timestamp"]=e[0].timestamp,r["hash"]=e[0].hash,t.push(r)},fetchMessages:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.$IOTA.findTransactionObjects({addresses:[e]}).then((function(e){for(var a=0;a<e.length;a++){var i=e[a];r.$IOTA.getBundle(i.hash).then((function(e){var r=s(e),a=JSON.parse(r);return a["message"]||a["name"]?(t.findIndex((function(t){return t["hash"]==e[0].hash}))<0&&(a["timestamp"]=e[0].timestamp,a["hash"]=e[0].hash,o(t,a,n)),null):null})).catch((function(){return null}))}return null})).catch((function(){return null}))},postMessage:function(e,t){var r=this,n=JSON.stringify(e),a=this.$UTFConverter.trytesFromUTF8String(n),o="PUEOTSEITFEVEWCWBTSIZM9NKRGJEIMXTULBACGFRQK9IMGICLBKW9TTEVSDQMGWKBXPVCBMMCXWMNPDX",s=3,i=9,u=[{value:0,address:t,message:a}];return this.$IOTA.prepareTransfers(o,u).then((function(e){return r.$IOTA.sendTrytes(e,s,i)})).catch((function(e){return console.error(e),null}))},postThread:function(e,t){var r=this,n=JSON.stringify(e),a=this.$UTFConverter.trytesFromUTF8String(n),o="PUEOTSEITFEVEWCWBTSIZM9NKRGJEIMXTULBACGFRQK9IMGICLBKW9TTEVSDQMGWKBXPVCBMMCXWMNPDX",s=3,i=9,u=[{value:0,address:t,message:a}];return this.$IOTA.prepareTransfers(o,u).then((function(e){return r.$IOTA.sendTrytes(e,s,i)}))},generateAddressFromName:function(e,t){return n["globalSettings"].boardName+"A".repeat(17-n["globalSettings"].boardName.length)+this.$Converter.asciiToTrytes(this.$MD5(e+t))}}},3:function(e,t){},3664:function(e,t,r){"use strict";r("bb74")},4:function(e,t){},"4bfb":function(e,t,r){"use strict";r("1847")},5:function(e,t){},"56d7":function(e,t,r){"use strict";r.r(t),r.d(t,"globalSettings",(function(){return W}));r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"refreshTimeSetter"},[r("p",[e._v("Refresh interval")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.refreshTime,expression:"refreshTime"}],attrs:{name:"refreshtime",id:"refreshtime"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.refreshTime=t.target.multiple?r:r[0]},function(t){return e.onChangeRefreshTime(t)}]}},[r("option",{attrs:{value:"0"}},[e._v("Off")]),r("option",{attrs:{value:"30"}},[e._v("30s")]),r("option",{attrs:{value:"10"}},[e._v("10s")]),r("option",{attrs:{value:"4"}},[e._v("4s")]),r("option",{attrs:{value:"2"}},[e._v("2s")])])]),e._m(0),r("router-view")],1)},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"nav"}},[n("img",{staticClass:"globe",attrs:{src:r("9dee")}}),n("h1",{staticClass:"title"},[e._v("TangleBoard")])])}],s={name:"App",data:function(){return{refreshTime:W.refreshTime}},methods:{onChangeRefreshTime:function(e){W.refreshTime=e.target.value,this.refreshTime=e.target.value}}},i=s,u=(r("034f"),r("2877")),c=Object(u["a"])(i,a,o,!1,null,null,null),l=c.exports,d=(r("d3b7"),r("3ca3"),r("ddb0"),r("8c4f")),h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"start"},[r("h1",{staticClass:"oswald"},[e._v("Choose board")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.boardNameInput,expression:"boardNameInput"}],attrs:{type:"text",onkeypress:"return (event.charCode > 64 && event.charCode < 91) || (event.charCode > 96 && event.charCode < 123)"},domProps:{value:e.boardNameInput},on:{input:function(t){t.target.composing||(e.boardNameInput=t.target.value)}}}),r("button",{attrs:{disabled:e.boardNameInput.length>17},on:{click:function(t){return e.enterBoard()}}},[e._v("Enter")])])},f=[],m={name:"Start",data:function(){return{boardNameInput:"main"}},methods:{enterBoard:function(){this.$router.push({name:"Home",params:{boardName:this.boardNameInput}})}},components:{}},p=m,v=(r("aa21"),Object(u["a"])(p,h,f,!1,null,null,null)),g=v.exports,A=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("router-view"),"threadviewer"!=e.$router.currentRoute.name?r("span",[r("ThreadList",{attrs:{msg:"Threads"}}),r("CreateThread",{attrs:{msg:"Create a new thread"}})],1):e._e()],1)},b=[],T=(r("38cf"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"threadlist"},[r("h1",{staticClass:"oswald"},[e._v(e._s(e.msg))]),r("table",{staticClass:"threads"},e._l(e.threads,(function(t){return r("tr",{key:t.hash},[r("th",[r("router-link",{attrs:{to:{name:"threadviewer",params:{name:t["name"],timestamp:t["timestamp"]}}}},[e._v(e._s(t["name"]))])],1),r("th",[e._v(e._s(new Date(1e3*t["timestamp"]).toLocaleString()))])])})),0)])}),y=[],C=r("2e0d"),_={created:function(){this.fetchMessages=C["a"].fetchMessages},name:"ThreadList",data:function(){return{threads:[],intervalid1:null}},methods:{fetchThreads:function(){this.fetchMessages(W.boardAddress,this.threads,!0)},startAutoFetchingThreads:function(){this.fetchThreads(),W.refreshTime>0&&(this.intervalid1=setInterval(function(){this.fetchThreads()}.bind(this),1e3*W.refreshTime))},stopAutoFetchingThreads:function(){clearInterval(this.intervalid1)}},props:{msg:String},mounted:function(){this.startAutoFetchingThreads()},beforeDestroy:function(){this.stopAutoFetchingThreads()}},N=_,I=(r("3664"),Object(u["a"])(N,T,y,!1,null,"4a23b808",null)),w=I.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"createthread"},[r("h1",{staticClass:"oswald"},[e._v(e._s(e.msg))]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.threadNameInput,expression:"threadNameInput"}],attrs:{type:"text"},domProps:{value:e.threadNameInput},on:{input:function(t){t.target.composing||(e.threadNameInput=t.target.value)}}}),r("button",{on:{click:function(t){return e.createThread()}}},[e._v("Create")])])},S=[],E={created:function(){this.postThread=C["a"].postThread},name:"CreateThread",data:function(){return{threadNameInput:""}},props:{msg:String},methods:{previewFiles:function(e){console.log(e.target.files),e.target.files.length>0&&(this.img=e.target.files[0])},createThread:function(){var e=this,t=this.threadNameInput,r=null;this.postThread({name:t},W.boardAddress).then((function(n){r=n[0].timestamp,e.$router.push({name:"threadviewer",params:{name:t,timestamp:r}})})).catch((function(e){console.error(e)})),this.threadNameInput=""}}},M=E,$=(r("4bfb"),r("1d13"),Object(u["a"])(M,O,S,!1,null,"0f8b35bf",null)),x=$.exports,F={name:"Home",data:function(){return{refreshTime:W.refreshTime}},methods:{},components:{ThreadList:w,CreateThread:x},props:{boardName:String},beforeMount:function(){W.boardName=this.$route.params.boardName.toUpperCase(),W.boardAddress=W.boardName+"A".repeat(81-W.boardName.length)}},P=F,j=Object(u["a"])(P,A,b,!1,null,null,null),B=j.exports;n["a"].use(d["a"]);var L=[{path:"/",name:"Start",component:g},{path:"/home/:boardName",name:"Home",component:B,children:[{path:"threadviewer/:name/:timestamp",name:"threadviewer",component:function(){return r.e("about").then(r.bind(null,"dc6f"))}}]}],D=new d["a"]({routes:L}),k=D,U=r("bc3a"),R=r.n(U);n["a"].config.productionTip=!1,n["a"].prototype.$IOTA=r("b7ec").composeAPI({provider:"https://nodes.devnet.iota.org:443"}),n["a"].prototype.$UTFConverter=r("0ed6"),n["a"].prototype.$Converter=r("17c8"),n["a"].prototype.$MD5=r("6821"),n["a"].prototype.$http=R.a;var W=new n["a"]({data:{refreshTime:4,boardAddress:"DATTTTRALIZEDCHANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",boardName:"DATTTTRALIZEDCHAN"}});new n["a"]({router:k,render:function(e){return e(l)}}).$mount("#app")},6:function(e,t){},7:function(e,t){},"7f8c":function(e,t,r){},8:function(e,t){},"85ec":function(e,t,r){},9:function(e,t){},"9dee":function(e,t,r){e.exports=r.p+"img/globe2.9111d003.gif"},aa21:function(e,t,r){"use strict";r("7f8c")},bb74:function(e,t,r){}});
//# sourceMappingURL=app.506edf00.js.map